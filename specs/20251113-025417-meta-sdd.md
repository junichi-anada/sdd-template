# Spec: meta: テンプレート改善SDD遵守と命名規則

## 概要
- 課題: テンプレート自身（ドキュメント、Makeターゲット、スクリプト、CI/PRテンプレート等）の改善が、SDDフロー（Spec→Plan→Tests→Code→Verify）を経ずに行われる余地があり、変更の透明性と一貫性が損なわれる。
- 目的: テンプレート自身の改善もSDDを厳守させ、起点となるSpecの命名規則を統一することで、履歴可視性・レビュー容易性・自動ガードの導入を可能にする。
- スコープ: ルール定義（命名規則の追加: コマンドは `make spec TITLE='meta: <仕様の内容>'`、Specファイル名は `meta-` 始まり）、ドキュメント更新（README、docs/sdd-flow.md）、PRチェックリスト強化（meta変更のチェック項目）。
- アウトオブスコープ: 既存アプリ/プロダクトコードの機能追加・変更、CIの大規模実装変更（警告レベルのガードに留める）。

## コンテキスト
- 背景: このリポジトリはSDDテンプレートを提供し、仕様駆動を徹底することを目的としている。しかしテンプレートそのものの改善は“メタ作業”として曖昧になりがちで、Spec/Planを経ない小変更が発生しやすい。
- 利用者/ロール: テンプレートメンテナ（Maintainers）、コントリビューター（Contributors）、レビュアー（Reviewers）。
- 前提条件: `make spec` が利用可能、Linux/Bash環境、現行のPRテンプレートとドキュメントが存在する。

## ユースケース / シナリオ
| シナリオID | タイトル | アクター | 概要 | 成功条件 |
|------------|----------|---------|------|----------|
| UC-1 | メタ改善開始 | Maintainer | テンプレート改善の着手時に `make spec TITLE='meta: <内容>'` でSpecを起票する | `specs/` に `meta-` で始まるSpecが作成され、レビューに回る |
| UC-2 | ドキュメント更新 | Contributor | 本ルールをREADMEとdocsに追記するPlan/PRを作成 | ドキュメントに命名規則とフロー追記が反映される |
| UC-3 | PRゲートでの確認 | Reviewer | メタ改善PRでチェックリストが満たされているか確認 | チェック項目（meta: Spec/Plan/テスト方針）が満たされる |

## 機能要件
| 要件ID | 区分(FUNC/NONFUNC) | 内容 | 優先度(H/M/L) |
|--------|--------------------|------|---------------|
| FR-1 | FUNC | テンプレート自身の改善では `make spec TITLE='meta: <仕様の内容>'` を必須とする命名規則を採用する | H |
| FR-2 | FUNC | 生成されるSpecファイル名は `meta-` で始まること（生成スクリプトで保証） | H |
| FR-3 | FUNC | README と `docs/sdd-flow.md` に上記ルールを明記する | H |
| FR-4 | FUNC | PRテンプレート（チェックリスト）に「メタ変更の場合：meta: Spec/Plan/テスト方針がある」を追加 | M |
| FR-5 | FUNC | 軽量なガード：meta変更を含むPRにラベル`meta`を付与する運用（自動・手動は後続） | M |
| FR-6 | NONFUNC | ルール導入により日常運用の摩擦が過度に増えないこと（1〜2コマンド/項目の増加に収める） | M |

## 非機能要件
- パフォーマンス: CI時間の増加は最小限（チェックは静的/テキストベース）。
- セキュリティ: 変更なし。
- 可観測性: PRでの可視性向上（ラベル/チェックリスト）。
- 運用: ルールはREADME/docsで自己説明的にし、オンボーディングを容易にする。

## 受け入れ基準
| 基準ID | 条件 | 検証方法 |
|--------|------|----------|
| AC-1 | `make spec TITLE='meta: ...'` でSpec草案が作成される | コマンド実行で `specs/` にファイル生成を確認 |
| AC-2 | 生成されたファイル名が `meta-` で開始している | 生成パス（例: `specs/2025...-meta-*.md`）を確認 |
| AC-3 | README と `docs/sdd-flow.md` にルールが追記されている | 差分レビューで記載確認 |
| AC-4 | PRチェックリストにメタ専用項目が追加されている | PRテンプレートの表示を確認 |
| AC-5 | メタ改善PRでチェック項目が満たされ、承認プロセスがSDDに従う | サンプルPRでの流れ確認 |

## リスク / 未決事項
| ID | 種類(RISK/OPEN) | 内容 | 対応/期日 |
|----|-----------------|------|-----------|
| R-1 | RISK | 細微な表現修正などに対し過剰な儀式化となる恐れ | 軽微修正の定義を別途ガイドに明記（例: 誤字修正はPRテンプレのみ） |
| O-1 | OPEN | PRテンプレ/CIでの自動検証（meta=接頭辞の自動チェック）をどこまで行うか | 本Spec承認後のPlanで詳細化 |

## 変更影響
- 影響範囲: ドキュメント、PRテンプレート、運用ルール。
- 互換性: 既存のSpec/Plan/Testsフローには非破壊。従来のSpec命名に追加ルールが乗るのみ。

## 承認
- Draft 作成者: Copilot
- レビュー: <REVIEWER>
- 承認日時: <APPROVED_AT>
- ステータス: DRAFT
